<div class="card">
    <p-table #dt2 [value]="products" dataKey="id" editMode="row" styleClass="p-datatable-gridlines p-datatable-striped"
        [rows]="5" [showCurrentPageReport]="true" [rowsPerPageOptions]="[5,10,20]" [loading]="loading"
        [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [globalFilterFields]="['','name','code','']" [tableStyle]="{'min-width':'75rem'}"
        [scrollable]="true" scrollHeight="400px">
        <ng-template pTemplate="caption">
            <div style="display: flex; justify-content: space-between;">
              <div>
                <button pButton pRipple type="button" label="New" icon="pi pi-plus" iconPos="left" class="p-button-success button_top_bar" (click)="addNewProduct()"></button>
                <button pButton pRipple type="button" label="Delete" icon="pi pi-trash" iconPos="left" class="button_delete button_top_bar" (click)="deleteSelectedProducts()"></button>
              </div>
              <button pButton pRipple type="button" icon="pi pi-cog"></button>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th style="width:25px">
                  <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th pSortableColumn="code" style="width:100px">
                  Code
                  <p-sortIcon field="code"></p-sortIcon>
                </th>
                <th pSortableColumn="name" style="width:100px">
                  Name
                  <p-sortIcon field="name"></p-sortIcon>
                </th>
                <th style="width:50px">
                  Actions
                </th>
            </tr>
            <tr>
                <th>
                </th>
                <th>
                    <p-columnFilter type="text" field="products.code"></p-columnFilter>
                </th>
                <th>
                    <p-columnFilter type="text" field="products.name"></p-columnFilter>
                </th>
                <th>
                    
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-products let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="products">
                <td>
                  <!-- <p-tableCheckbox [value]="products" [(ngModel)]="selectedProducts"></p-tableCheckbox> -->
                  <p-tableCheckbox [value]="products"></p-tableCheckbox>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="products.code">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{products.code}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input pInputText type="text" [(ngModel)]="products.name">
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{products.name}}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td>
                  <div class="flex align-items-center justify-content-center gap-2">
                        <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(products)" class="p-button-rounded p-button-text"></button>
                        <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-trash" (click)="onDelete(products)" class="p-button-rounded p-button-text p-button-danger"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(products)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                        <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(products, ri)" class="p-button-rounded p-button-text p-button-danger"></button>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="5">No customers found.</td>
            </tr>
        </ng-template>
    </p-table>
</div>